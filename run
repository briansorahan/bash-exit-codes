#!/bin/bash

main() {
	local bash_dir=/etc/bash.d
	local outfile=${bash_dir}/exitcodes

	[ ! -d ${bash_dir} ] && mkdir -p ${bash_dir}

	cat <<PREAMBLE >${outfile}
# This file automatically generated by bash-exit-codes.
# Brian Sorahan <bsorahan@gmail.com>

PREAMBLE

	sed -n 's/#define EX\([_[:alpha:]]*\)[[:space:]]*\([[:digit:]]*\)[[:space:]]*\/\* \(.*\) \*\//EX\1 = \2 # \3/p' /usr/include/sysexits.h >>/etc/bash.d/exitcodes
}

main "$@"